/*==============================================================================
Description:
==============================================================================*/

//******************************************************************************
//******************************************************************************
//******************************************************************************

#include "stdafx.h"

#include "someVideoThread.h"
#include "someVideoParms.h"

#define  _SOMETIMERTHREAD1_CPP_
#include "someTimerThread.h"

//******************************************************************************
//******************************************************************************
//******************************************************************************

namespace Some
{

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Constuctor.

TimerThread::TimerThread()
{
   // Set base class thread priority
   BaseClass::setThreadPriorityHigh();

   // Set timer period
   BaseClass::mTimerPeriod = gVideoParms.mTimerThreadPeriod;

   // Initialize members.
   mTPCode = false;
}

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Execute periodically. This is called by the base class timer.

void TimerThread::executeOnTimer(int aTimeCount)
{
   Prn::print(Prn::ViewRun1, "TimerThread Timer %4d",aTimeCount);

   // Guard.
   if (!mTPCode) return;
   if (!gVideoThread) return;

   // Post a draw event to the video thread.
   if (mTPCode == 1)
   {
      gVideoThread->postDraw1(aTimeCount % 2);
   }
   else if (mTPCode == 2)
   {
      gVideoThread->postDraw2(aTimeCount % 2);
   }
}

//******************************************************************************
//******************************************************************************
//******************************************************************************
}//namespace